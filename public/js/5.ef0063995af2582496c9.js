webpackJsonp([5],{"3SI7":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("ZZTC"),n=o.n(r);for(var s in r)"default"!==s&&function(e){o.d(t,e,function(){return r[e]})}(s);var i=o("byRg"),a=o("VU/8")(n.a,i.a,!1,null,null,null);t.default=a.exports},Mwpc:function(e,t,o){"use strict";var r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-8 m-auto"},[o("card",{attrs:{title:e.$t("login")}},[o("form",{on:{submit:function(t){t.preventDefault(),e.login(t)},keydown:function(t){e.form.onKeydown(t)}}},[o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("email")))]),e._v(" "),o("div",{staticClass:"col-md-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"email",name:"email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"email"}})],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("password")))]),e._v(" "),o("div",{staticClass:"col-md-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"password"}})],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("div",{staticClass:"col-md-3"}),e._v(" "),o("div",{staticClass:"col-md-7 d-flex"},[o("checkbox",{attrs:{name:"remember"},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("\n              "+e._s(e.$t("remember_me"))+"\n            ")]),e._v(" "),o("router-link",{staticClass:"small ml-auto my-auto",attrs:{to:{name:"password.request"}}},[e._v("\n              "+e._s(e.$t("forgot_password"))+"\n            ")])],1)]),e._v(" "),o("div",{staticClass:"form-group row"},[o("div",{staticClass:"col-md-7 offset-md-3 d-flex"},[o("alert-error",{attrs:{form:e.form,message:e.form.message}}),e._v(" "),o("v-button",{attrs:{loading:e.form.busy}},[e._v("\n              "+e._s(e.$t("login"))+"\n            ")]),e._v(" "),o("div",{staticClass:"ml-auto"},[o("login-with-social",{attrs:{provider:"vkontakte",ic:"vk"}}),e._v(" "),o("login-with-social",{attrs:{provider:"steam",ic:"steam"}})],1)],1)])])])],1)])},staticRenderFns:[]};t.a=r},ZZTC:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(o("fZjL")),n=l(o("Dd8w")),s=l(o("pFYg")),i=l(o("Xxa5")),a=l(o("exGp"));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===e?"undefined":(0,s.default)(e))&&(o=e,e=""),o=(0,n.default)({url:e,title:t,width:600,height:720},o);var i=void 0!==window.screenLeft?window.screenLeft:window.screen.left,a=void 0!==window.screenTop?window.screenTop:window.screen.top,l=window.innerWidth||document.documentElement.clientWidth||window.screen.width,d=window.innerHeight||document.documentElement.clientHeight||window.screen.height;o.left=l/2-o.width/2+i,o.top=d/2-o.height/2+a;var u=(0,r.default)(o).reduce(function(e,t){return e.push(t+"="+o[t]),e},[]).join(","),c=window.open(e,t,u);return window.focus&&c.focus(),c}t.default={name:"LoginWithSocial",props:{provider:{type:String,default:null},ic:{type:String,default:null},text:{type:String,default:null}},mounted:function(){window.addEventListener("message",this.onMessage,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{login:function(){var e=this;return(0,a.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d("/social/"+e.provider,e.$t("login"));case 2:case"end":return t.stop()}},t,e)}))()},onMessage:function(e){e.origin!==window.origin&&e.origin!==window.config.apiHost||!e.data.token||(this.$store.dispatch("auth/saveToken",{token:e.data.token}),this.$router.push({name:"settings.profile"}))}}}},byRg:function(e,t,o){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("button",{class:"nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-info p-9 ml-5 nk-social-"+this.ic,attrs:{type:"button"},on:{click:this.login}},[this._v("\n    "+this._s(this.text)+"\n    "),t("fa",{attrs:{icon:["fab",this.ic]}})],1)},staticRenderFns:[]};t.a=r},ihEP:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(o("Xxa5")),n=a(o("exGp")),s=a(o("yKuP")),i=a(o("3SI7"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={middleware:"guest",components:{LoginWithSocial:i.default},metaInfo:function(){return{title:this.$t("login")}},data:function(){return{form:new s.default({email:"",password:""}),remember:!1}},methods:{login:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var o,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.form.post("/api/login");case 2:return o=t.sent,n=o.data,e.$store.dispatch("auth/saveToken",{token:n.token,remember:e.remember}),t.next=7,e.$store.dispatch("auth/fetchUser");case 7:e.$router.push({name:"settings.profile"});case 8:case"end":return t.stop()}},t,e)}))()}}}},yNuM:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("ihEP"),n=o.n(r);for(var s in r)"default"!==s&&function(e){o.d(t,e,function(){return r[e]})}(s);var i=o("Mwpc"),a=o("VU/8")(n.a,i.a,!1,null,null,null);t.default=a.exports}});
//# sourceMappingURL=5.ef0063995af2582496c9.js.map