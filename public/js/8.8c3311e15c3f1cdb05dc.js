webpackJsonp([8],{"4qB1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("SxQf"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);var r=a("rh08"),l=a("VU/8")(i.a,r.a,!1,null,null,null);e.default=l.exports},SxQf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=l(a("Dd8w")),i=a("NYxO"),n=l(a("mtWM")),r=l(a("e7x4"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={metaInfo:{title:"Teams",titleTemplate:null},computed:(0,s.default)({},(0,i.mapGetters)({user:"authUser",authenticated:"authCheck"})),mounted:function(){this.getVueItems(),this.getGames(),this.getCountries();var t=this;Vue.nextTick(function(){function e(t){if(!t.id)return t.text;var e=$(t.element).data("image");return e?$('<span><img src="/images/flags/'+e+'" width="23px" /> '+t.text+"</span>"):t.text}$("#game_list").select2({placeholder:"Select game",allowClear:!0}).on("select2:select",function(e){t.game_id=$(e.currentTarget).find("option:selected").val(),t.search()}).on("select2:unselecting",function(e){t.game_id="",""!=t.country_id?t.$router.push(t.$route.path+"?users_country_id="+t.country_id):t.$router.push(t.$route.path)}),$("#country_list").select2({placeholder:"Select country",templateResult:e,templateSelection:e,allowClear:!0}).on("select2:select",function(e){t.country_id=$(e.currentTarget).find("option:selected").val(),t.search()}).on("select2:unselecting",function(e){t.country_id="",""!=t.game_id?t.$router.push(t.$route.path+"?game_id="+t.game_id):t.$router.push(t.$route.path)})})},data:function(){return{teams:[],games:[],countries:[],queryString:"",pagination:[],statuses:[{id:"",title:""},{id:0,title:"pending"},{id:1,title:"accepted"}],game_id:this.$route.query.game_id||"",country_id:this.$route.query.users_country_id||""}},methods:{getVueItems:function(){var t=this,e={page:1,_limit:12,_with:"game,fights,users",_sort:"-id"};this.authenticated&&"investor"!=this.user.type&&(e.game_id=this.user.game_id);var a=this.UrlParamsMerge(e);n.default.get("/api/teams?"+a).then(function(e){t.$set(t,"teams",e.data.data),delete e.data.data,t.pagination=e.data})},getGames:function(){var t=this;n.default.get("/api/games").then(function(e){t.$set(t,"games",e.data),t.$parent.games=t.games})},getCountries:function(){var t=this;n.default.get("/api/countries").then(function(e){t.$set(t,"countries",e.data)})},search:function(t){this.$router.push(this.$route.path+"?"+$("#filter-form").serialize())},joinTeam:function(t){n.default.put("/api/teams/"+t+"/users/"+this.user.id).then(function(t){(0,r.default)({type:"success",title:"Request sent!",html:"You sent request to the team!"})}).catch(function(t){(0,r.default)({type:"warning",title:"Error!",html:t.response.data.error})})}},watch:{"$route.query":function(t,e){this.getVueItems()}}}},rh08:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.authenticated?t._e():a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col-md-12"},[a("card",[a("div",{staticClass:"form-wrap"},[a("form",{attrs:{autocomplete:"off",id:"filter-form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.game_id,expression:"game_id"}],staticClass:"form-control",attrs:{name:"game_id","data-style":"form-control btn-default btn-outline",id:"game_list"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.game_id=e.target.multiple?a:a[0]}}},t._l(t.games,function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])}))]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.country_id,expression:"country_id"}],staticClass:"form-control",attrs:{name:"users_country_id","data-style":"form-control btn-default btn-outline",id:"country_list"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.country_id=e.target.multiple?a:a[0]}}},t._l(t.countries,function(e){return a("option",{attrs:{"data-image":e.flag},domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])}))])])])])])],1)]),t._v(" "),a("div",{staticClass:"nk-gap-2"}),t._v(" "),null!==t.teams?a("card",{class:{"mt-20":t.authenticated},attrs:{title:"Teams"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[a("table",{staticClass:"nk-table"},[a("tbody",[a("tr",[a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Players")]),t._v(" "),a("th",[t._v("Game")]),t._v(" "),a("th",[t._v("Total fights")]),t._v(" "),a("th",[t._v("Count wins")]),t._v(" "),a("th",[t._v("Victory rate")]),t._v(" "),a("th",[t._v("Earned")]),t._v(" "),a("th",[t._v("Amount paid to investors")]),t._v(" "),a("th",[t._v("Price")]),t._v(" "),a("th",[t._v("Status")])]),t._v(" "),t._l(t.teams,function(e){return a("tr",[a("td",[a("router-link",{staticClass:"vm-title",attrs:{to:{name:"team.detail",params:{slug:e.slug}}}},[a("img",{staticClass:"img-responsive team-image",attrs:{src:t.getImageLink(e.image,"avatar_team"),alt:e.title}}),t._v(" "),a("span",[t._v(t._s(e.title))])])],1),t._v(" "),a("td",{staticClass:"text-center"},[a("router-link",{attrs:{to:{name:"team.detail.players",params:{slug:e.slug}}}},[t._v(t._s(e.users.length))]),t._v(" / "+t._s(e.quantity))],1),t._v(" "),null!==e.game?a("td",{staticClass:"text-center"},[a("router-link",{attrs:{to:{name:"game",params:{gameId:e.game.id}},title:e.game.title}},[a("img",{attrs:{src:t.getImageLink(e.game.logo_mini),width:"35",alt:e.game.title}})])],1):a("td",{staticClass:"text-center"}),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.count_fights))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.count_wins))]),t._v(" "),e.count_fights>0?a("td",{staticClass:"text-center"},[t._v(t._s(Number((e.count_wins/e.count_fights*100).toFixed(2)))+"%")]):a("td",{staticClass:"text-center"},[t._v("0%")]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.total_sum))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.payed_dividents))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(Number(e.price.toFixed(2))))]),t._v(" "),a("td",{staticClass:"text-center"},[0==e.status?a("span",[a("span",{staticClass:"label label-default capitalize-font inline-block"},[t._v("pending")])]):t._e(),t._v(" "),1==e.status?a("span",[a("span",{staticClass:"label label-success capitalize-font inline-block"},[t._v("accepted")])]):t._e(),t._v(" "),e.quantity>e.users.length&&t.authenticated&&t.user.id!==e.capt_id&&"player"==t.user.type&&t.user.active?a("button",{staticClass:"btn btn-primary btn-icon left-icon btn-xs ml-10",on:{click:function(a){t.joinTeam(e.id)}}},[a("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v("Â  join the team")]):t._e()])])})],2)])])]),t._v(" "),a("pagination",{attrs:{pagination:t.pagination}})],1):t._e()],1)},staticRenderFns:[]};e.a=s}});
//# sourceMappingURL=8.8c3311e15c3f1cdb05dc.js.map