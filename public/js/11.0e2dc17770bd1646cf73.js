webpackJsonp([11],{YPpS:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[null!==t.tournament?a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col-lg-12 col-md-12 col-xs-12"},[a("card",{attrs:{pa_0:"true"}},[a("div",{staticClass:"profile-box"},[a("div",{staticClass:"profile-cover-pic"},[a("div",{staticClass:"profile-image-overlay",style:{"background-image":"url("+t.getImageLink(null,"overlay_user")+")"}})]),t._v(" "),a("div",{staticClass:"profile-info text-center"},[a("div",{staticClass:"tab-struct custom-tab-1 mt-5 mb-10 weight-600"},[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"tournament.detail"},"active-class":"active"}},[t._v("\n                                        Overview\n                                    ")])],1),t._v(" "),null!=t.tournament.fights&&t.tournament.fights.length>0?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"tournament.detail.brackets"},"active-class":"active"}},[t._v("\n                                        Brackets\n                                    ")])],1):t._e(),t._v(" "),null!=t.tournament.fights&&t.tournament.fights.length>0?a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"tournament.detail.matches"},"active-class":"active"}},[t._v("\n                                        Matches\n                                    ")])],1):t._e(),t._v(" "),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"tournament.detail.rules"},"active-class":"active"}},[t._v("\n                                        Rules\n                                    ")])],1)])]),t._v(" "),a("div",{staticClass:"profile-img-wrap"},[a("img",{staticClass:"inline-block",attrs:{src:t.getImageLink(t.tournament.image),alt:"user"}})]),t._v(" "),a("h5",{staticClass:"profile-title",staticStyle:{bottom:"52px"}},[a("span",{staticClass:"txt-dark font-21 weight-600"},[t._v(t._s(t.tournament.title))]),a("br"),t._v(" "),a("span",{staticClass:"font-15 weight-500"},[t._v(t._s(t.moment(t.tournament.start_at,"YYYY-MM-DD h:mm:ss").format("MMMM Do, h:mma")))]),t._v(" "),a("div",{staticClass:"input-group mt-5"},[t.authenticated&&t.checkRegistered(t.user.team_id)?a("span",{staticClass:"btn btn-success btn-icon left-icon btn-xs",attrs:{disabled:""}},[a("i",{staticClass:"fa fa-check"}),t._v("Â  Your team is already registered.")]):t.checkRigisterStart()&&t.checkRigisterEnd()?a("button",{staticClass:"btn btn-primary btn-xs",on:{click:t.register}},[t._v("Register")]):t.checkRigisterStart()?t.checkRigisterEnd()?t._e():a("button",{staticClass:"btn btn-defualt btn-xs",attrs:{disabled:""}},[t._v("Registration finished")]):a("button",{staticClass:"btn btn-primary btn-xs",attrs:{disabled:""}},[t._v("Registration will start at "+t._s(t.moment(t.tournament.register_start,"YYYY-MM-DD h:mm:ss").format("MMMM Do, h:mma")))])])])])])])],1)]):t._e(),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade active in"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)])])},staticRenderFns:[]};e.a=n},m5O0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("nxqK"),r=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var i=a("YPpS"),u=a("VU/8")(r.a,i.a,!1,null,null,null);e.default=u.exports},nxqK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(a("Xxa5")),r=c(a("exGp")),s=c(a("Dd8w")),i=a("NYxO"),u=c(a("mtWM")),o=c(a("e7x4"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={metaInfo:function(){return{title:this.title}},computed:(0,s.default)({},(0,i.mapGetters)({user:"auth/user",authenticated:"auth/check",locale:"lang/locale"}),{teamsInTournament:function(){var t=[];return void 0!=this.tournament.teams&&this.tournament.teams.length>0&&this.tournament.teams.forEach(function(e){t.push(e.id)}),t}}),mounted:function(){this.getTournament()},data:function(){return{title:"Detail tournament",tournament:null,success:!1,error:!1,response:null,tabs:[{name:"Overview",route:"tournament.detail"},{name:"Brackets",route:"tournament.detail.brackets"},{name:"Rules",route:"tournament.detail.rules"}]}},methods:{getTournament:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var a,r,s,i,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ArrayToUrl({_with:"game,fights,fights.invitations.team,fights.winner"}),e.prev=1,e.next=4,u.default.get("/api/tournaments/"+t.$route.params.id+"?"+a);case 4:r=e.sent,t.$set(t,"tournament",r.data),t.tournament.start_at=t.dateConvertUTC(t.tournament.start_at,-1),t.tournament.register_start=t.dateConvertUTC(t.tournament.register_start,-1),s=t.tournament.winners_part.split(","),i=parseInt(t.tournament.prize_pool),o=[],s.forEach(function(t){o.push(parseInt(t)*i/100)}),t.tournament.prizes=o,t.title=t.tournament.title,t.$meta().refresh(),t.getTournamentTeams(),t.getTournamentBrackets(),Event.fire("tournamentEditLoad",{tournament:t.tournament}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),t.errors.push(e.t0);case 23:case"end":return e.stop()}},e,t,[[1,20]])}))()},getTournamentTeams:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get("/api/tournaments/"+t.$route.params.id+"/teams");case 3:a=e.sent,t.$set(t.tournament,"teams",a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.errors.push(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},getTournamentBrackets:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get("/api/tournaments/"+t.$route.params.id+"/brackets");case 3:a=e.sent,t.$set(t.tournament,"brackets",a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.errors.push(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},register:function(){var t=this;this.authenticated?null!=this.user.team_id?u.default.post("/api/tournaments/"+this.$route.params.id+"/teams/"+this.user.team_id).then(function(e){(0,o.default)({type:"success",title:"Success!",html:"You are registered on the tournament!"}),t.getTournamentTeams()}).catch(function(t){(0,o.default)({type:"warning",title:"Error!",html:t.response.data.error})}):(0,o.default)({type:"warning",title:"Error!",html:"You need to be in the team."}):this.$router.push({name:"auth.login"})},checkRigisterStart:function(){return this.moment.utc().isAfter(this.tournament.register_start)},checkRigisterEnd:function(){return this.moment.utc().isBefore(this.moment(this.tournament.start_at).subtract(1,"hours"))},checkRegistered:function(t){return this.teamsInTournament.indexOf(t)>-1}}}}});
//# sourceMappingURL=11.0e2dc17770bd1646cf73.js.map