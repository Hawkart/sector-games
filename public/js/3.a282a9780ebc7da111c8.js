webpackJsonp([3],{"3SI7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("ZZTC"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var s=n("wcO2"),i=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=i.exports},"JD/n":function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:e.$t("your_info")}},[n("form",{on:{submit:function(t){t.preventDefault(),e.update(t)},keydown:function(t){e.form.onKeydown(t)}}},[n("alert-success",{attrs:{form:e.form,message:e.$t("info_updated")}}),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("game")))]),e._v(" "),n("div",{staticClass:"col-md-7"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.game_id,expression:"form.game_id"}],staticClass:"form-control",attrs:{name:"game_id"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"game_id",t.target.multiple?n:n[0])},e.selectGame]}},e._l(e.games,function(t){return n("option",{domProps:{value:t.id}},[e._v("\n                        "+e._s(t.title)+"\n                    ")])})),e._v(" "),n("has-error",{attrs:{form:e.form,field:"game_id"}})],1)]),e._v(" "),null!=e.form.game_id?n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("game_roles")))]),e._v(" "),n("div",{staticClass:"col-md-7",staticStyle:{"padding-top":"8px"}},[e._l(e.game_roles,function(t){return null!=e.game_roles&&e.game_roles.length>0?n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.game_roles,expression:"form.game_roles"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.form.game_roles)?e._i(e.form.game_roles,t.id)>-1:e.form.game_roles},on:{change:function(n){var r=e.form.game_roles,a=n.target,o=!!a.checked;if(Array.isArray(r)){var s=t.id,i=e._i(r,s);a.checked?i<0&&(e.form.game_roles=r.concat([s])):i>-1&&(e.form.game_roles=r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.form,"game_roles",o)}}}),e._v(" "),n("label",{staticClass:"form-check-label"},[e._v(e._s(t.title))])]):e._e()}),e._v(" "),n("has-error",{attrs:{form:e.form,field:"game_roles"}})],2)]):e._e(),e._v(" "),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("nickname")))]),e._v(" "),n("div",{staticClass:"col-md-7"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nickname,expression:"form.nickname"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("nickname")},attrs:{type:"text",name:"nickname"},domProps:{value:e.form.nickname},on:{input:function(t){t.target.composing||e.$set(e.form,"nickname",t.target.value)}}}),e._v(" "),n("has-error",{attrs:{form:e.form,field:"nickname"}})],1)]),e._v(" "),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-md-9 ml-md-auto"},[n("v-button",{attrs:{loading:e.form.busy,type:"success"}},[e._v(e._s(e.$t("update")))]),e._v(" "),n("login-with-social",{attrs:{provider:"steam",ic:"steam",text:e.$t("connect_account")}})],1)])],1)])},staticRenderFns:[]};t.a=r},QVM2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("Xxa5")),a=l(n("exGp")),o=l(n("Dd8w")),s=l(n("yKuP")),i=l(n("mtWM")),u=n("NYxO"),c=l(n("3SI7"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={metaInfo:function(){return{title:this.$t("team")}},components:{LoginWithSocial:c.default},data:function(){return{form:new s.default({game_id:"",game_roles:"",nickname:""}),games:null,game_roles:null}},computed:(0,o.default)({},(0,u.mapGetters)({user:"auth/user"}),{chars:function(){return this.$t("alphabet").split(",")}}),created:function(){var e=this;this.form.keys().forEach(function(t){e.form[t]=e.user[t]})},mounted:function(){this.getGames(),null!=this.user.game_id&&this.getGameRoles(this.user.game_id)},methods:{getGames:function(){var e=this;return(0,a.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.get("/api/games").then(function(t){e.$set(e,"games",t.data)});case 2:case"end":return t.stop()}},t,e)}))()},getGameRoles:function(e){var t=this;return(0,a.default)(r.default.mark(function n(){var a;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.ArrayToUrl({game_id:e}),n.next=3,i.default.get("/api/game_roles?"+a).then(function(e){t.$set(t,"game_roles",e.data)});case 3:case"end":return n.stop()}},n,t)}))()},update:function(){var e=this;return(0,a.default)(r.default.mark(function t(){var n,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.form.post("/api/users");case 2:n=t.sent,a=n.data,e.$store.dispatch("auth/updateUser",{user:a.data});case 5:case"end":return t.stop()}},t,e)}))()},selectGame:function(){var e=this;return(0,a.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGameRoles(e.form.game_id);case 2:case"end":return t.stop()}},t,e)}))()}}}},ZZTC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("fZjL")),a=u(n("Dd8w")),o=u(n("pFYg")),s=u(n("Xxa5")),i=u(n("exGp"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===e?"undefined":(0,o.default)(e))&&(n=e,e=""),n=(0,a.default)({url:e,title:t,width:600,height:720},n);var s=void 0!==window.screenLeft?window.screenLeft:window.screen.left,i=void 0!==window.screenTop?window.screenTop:window.screen.top,u=window.innerWidth||document.documentElement.clientWidth||window.screen.width,c=window.innerHeight||document.documentElement.clientHeight||window.screen.height;n.left=u/2-n.width/2+s,n.top=c/2-n.height/2+i;var l=(0,r.default)(n).reduce(function(e,t){return e.push(t+"="+n[t]),e},[]).join(","),d=window.open(e,t,l);return window.focus&&d.focus(),d}t.default={name:"LoginWithSocial",props:{provider:{type:String,default:null},ic:{type:String,default:null},text:{type:String,default:null}},computed:{url:function(){return"/api/social/"+(void 0).provider}},mounted:function(){window.addEventListener("message",this.onMessage,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{login:function(){var e=this;return(0,i.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/fetchOauthUrl",{provider:e.provider});case 2:c(t.sent,e.$t("login"));case 4:case"end":return t.stop()}},t,e)}))()},onMessage:function(e){e.origin!==window.origin&&e.origin!==window.config.apiHost||!e.data.token||(this.$store.dispatch("auth/saveToken",{token:e.data.token}),this.$router.push({name:"home"}))}}}},dqi5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("QVM2"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var s=n("JD/n"),i=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=i.exports},wcO2:function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("button",{class:"nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-info ml-5 nk-social-"+this.ic,attrs:{type:"button"},on:{click:this.login}},[this._v("\n    "+this._s(this.text)+"\n    "),t("fa",{attrs:{icon:["fab",this.ic]}})],1)},staticRenderFns:[]};t.a=r}});
//# sourceMappingURL=3.a282a9780ebc7da111c8.js.map