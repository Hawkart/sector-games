webpackJsonp([6],{"Aa2/":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=c(s("Dd8w")),a=s("NYxO"),n=c(s("mtWM")),l=(c(s("e7x4")),s("HNcv")),r=c(s("yKuP")),o=c(s("c1b3"));function c(t){return t&&t.__esModule?t:{default:t}}i.default={components:{MatchChat:o.default},metaInfo:function(){return{title:this.$t("players")}},computed:(0,e.default)({},(0,a.mapGetters)({user:"auth/user",authenticated:"auth/check",locale:"lang/locale"})),data:function(){return{fight:[],form:new r.default({twitch_link:""}),formResult:new r.default({match_result:""}),formFight:new r.default({result:"",winner_id:""}),result_1:"",result_2:"",winner_id:"",chat:null}},mounted:function(){(0,l.loadMessages)(this.locale),this.moment.locale(this.locale),this.getFight()},methods:{getFightChat:function(){var t=this;n.default.get("/api/fights/"+this.$route.params.id+"/thread").then(function(i){t.$set(t,"chat",i.data)})},getFight:function(){var t=this,i=this.ArrayToUrl({_with:"invitations.team,invitations.team.institution,invitations.team.institution.location,judge,commentator,threads"});n.default.get("/api/fights/"+this.$route.params.id+"?"+i).then(function(i){var s=i.data;if(s.start_at=t.dateConvertUTC(s.start_at,-1),t.$set(t,"fight",s),t.authenticated){var e=t;3!=t.fight.status?t.fight.invitations.forEach(function(t){t.team.capt_id==e.user.id&&(e.form.twitch_link=t.twitch_link,null!=t.match_result&&(e.formResult.match_result=t.match_result,e.result_1=t.match_result.result_1,e.result_2=t.match_result.result_2,e.winner_id=t.match_result.winner_id))}):(t.result_1=t.fight.result[0],t.result_2=t.fight.result[1],t.winner_id=t.fight.winner_id),s.invitations[0].team.capt_id!=t.user.id&&s.invitations[1].team.capt_id!=t.user.id&&s.judge_id!=t.user.id&&1!=t.user.role_id||t.getFightChat()}})},checkUpcoming:function(t){var i=new Date(t),s=new Date;return i.getTime()-s.getTime()>0},matchExSave:function(){var t=this;this.form.put("/api/fights/"+this.fight.id+"/teams/"+this.user.team_id).then(function(i){var s=t;t.fight.invitations.map(function(t){t.team.capt_id==s.user.id&&(t.twitch_link=s.form.twitch_link)})})},saveResult:function(){this.formResult.match_result={result_1:this.result_1,result_2:this.result_2,winner_id:this.winner_id},this.formResult.put("/api/fights/"+this.fight.id+"/teams/"+this.user.team_id)},saveFight:function(){this.formFight.result=[this.result_1,this.result_2],this.formFight.winner_id=this.winner_id,this.formFight.put("/api/fights/"+this.fight.id)}},watch:{"$route.query":function(t,i){this.getFights()}}}},"R/6+":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=u(s("Dd8w")),a=s("NYxO"),n=u(s("mtWM")),l=u(s("T3t9")),r=u(s("xOid")),o=u(s("gMd1")),c=u(s("xOfH"));function u(t){return t&&t.__esModule?t:{default:t}}i.default={components:{ChatParticipants:c.default,ChatChannels:o.default,ChatMessages:l.default,ChatNewMessage:r.default},computed:(0,e.default)({},(0,a.mapGetters)({user:"auth/user",authenticated:"auth/check"})),props:["channel"],data:function(){return{participants:[],socket:null,messages:null,activeChannel:null,isTyping:!1,typingTimer:!1,showChats:!1}},created:function(){var t=this;this.activeChannel=this.channel,this.fetchMessages(),this.fetchParticipants(),window.Echo.private("channel_"+this.channel.id.toString()).listen("MessageSent",function(i){t.messages.push(i.data),t.isTyping=!1}).listenForWhisper("typing",function(i){t.isTyping=i,t.typingTimer&&clearTimeout(t.typingTimer),t.typingTimer=setTimeout(function(){t.isTyping=!1},2e3)})},methods:{fetchMessages:function(){var t=this;null!==this.activeChannel&&n.default.get("/api/channels/"+this.activeChannel.id+"/messages").then(function(i){var s=i.data,e=t;s.forEach(function(t){t.created_at=e.dateConvertUTC(t.created_at,-1)}),t.messages=s})},fetchParticipants:function(){var t=this;null!==this.activeChannel&&n.default.get("/api/channels/"+this.activeChannel.id+"/participants").then(function(i){var s=i.data;t.participants=s})},onChannelChanged:function(t){this.activeChannel=t,this.fetchMessages(),this.fetchParticipants()},onMessageAdded:function(t){}}}},X1lD:function(t,i,s){"use strict";var e={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",t._l(t.participants,function(i){return null!=t.participants?s("span",[t._v(t._s(i.nickname)+", ")]):t._e()})),t._v(" "),s("div",{staticClass:"chat-window match-chat"},[s("div",{staticClass:"chat-cmplt-wrap chat-for-widgets-1"},[s("div",{staticClass:"recent-chat-box-wrap"},[s("div",{staticClass:"recent-chat-wrap"},[s("div",{staticClass:"chat-content"},[s("chat-messages",{attrs:{messages:t.messages,isTyping:t.isTyping}})],1),t._v(" "),s("chat-new-message",{attrs:{"active-channel":t.activeChannel},on:{messageAdded:t.onMessageAdded}})],1)])])])])},staticRenderFns:[]};i.a=e},c1b3:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("R/6+"),a=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(i,t,function(){return e[t]})}(n);var l=s("X1lD"),r=s("VU/8")(a.a,l.a,!1,null,null,null);i.default=r.exports},upqO:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Aa2/"),a=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(i,t,function(){return e[t]})}(n);var l=s("ymAP"),r=s("VU/8")(a.a,l.a,!1,null,null,null);i.default=r.exports},ymAP:function(t,i,s){"use strict";var e={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return null!=t.fight?s("card",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("div",{staticClass:"nk-match"},[s("div",{staticClass:"nk-match-team-left"},[s("router-link",{attrs:{to:{name:"team",params:{id:t.fight.invitations[0].team.id}}}},[s("span",{staticClass:"nk-match-team-logo"},[s("img",{staticClass:"w-64px mr-10",attrs:{src:t.getImageLink(t.fight.invitations[0].team.image,"avatar_team")}})]),t._v(" "),s("span",{staticClass:"nk-match-team-name"},[t._v("\n                            "+t._s(t.fight.invitations[0].team.institution.title)+", "+t._s(t.fight.invitations[0].team.institution.location.title)+","),s("br"),t._v("\n                            "+t._s(t.fight.invitations[0].team.title)+"\n                        ")])])],1),t._v(" "),s("div",{staticClass:"nk-match-status"},[s("router-link",{attrs:{to:{name:"match",params:{id:t.fight.id}}}},[s("span",{staticClass:"nk-match-status-vs"},[24==t.fight.id?[t._v("VS (bo5)")]:[t._v("VS (bo3)")]],2),t._v(" "),s("span",{staticClass:"nk-match-status-date"},[t._v(t._s(t.moment.utc(t.fight.start_at,"YYYY-MM-DD h:mm:ss").format("MMMM Do, HH:mm"))+" МСК")]),t._v(" "),t.checkUpcoming(t.fight.start_at)?[s("span",{staticClass:"nk-match-score"},[t._v(t._s(t.$t("upcoming")))])]:t.fight.winner_id>0&&null!=t.fight.result?[s("span",{staticClass:"nk-match-score bg-dark-1"},[parseInt(t.fight.result[0])>parseInt(t.fight.result[1])&&t.fight.invitations[0].team.id==t.fight.winner_id?[t._v("\n                                "+t._s(t.fight.result[0])+" : "+t._s(t.fight.result[1])+"\n                            ")]:parseInt(t.fight.result[1])>parseInt(t.fight.result[0])&&t.fight.invitations[1].team.id==t.fight.winner_id?[t._v("\n                                "+t._s(t.fight.result[0])+" : "+t._s(t.fight.result[1])+"\n                            ")]:[t._v("\n                                "+t._s(t.fight.result[1])+" : "+t._s(t.fight.result[0])+"\n                            ")]],2)]:[s("span",{staticClass:"nk-match-score bg-success"},[t._v(t._s(t.$t("online")))])]],2)],1),t._v(" "),s("div",{staticClass:"nk-match-team-right"},[s("router-link",{attrs:{to:{name:"team",params:{id:t.fight.invitations[1].team.id}}}},[s("span",{staticClass:"nk-match-team-name"},[t._v("\n                            "+t._s(t.fight.invitations[1].team.institution.title)+", "+t._s(t.fight.invitations[1].team.institution.location.title)+","),s("br"),t._v("\n                            "+t._s(t.fight.invitations[1].team.title)+"\n                        ")]),t._v(" "),s("span",{staticClass:"nk-match-team-logo"},[s("img",{staticClass:"w-64px ml-10",attrs:{src:t.getImageLink(t.fight.invitations[1].team.image,"avatar_team")}})])])],1)])])]),t._v(" "),s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("div",{staticClass:"responsive-embed responsive-embed-16x9"},[s("iframe",{attrs:{src:"https://player.twitch.tv/?channel=youthleagueru",frameborder:"0",allowfullscreen:"true",scrolling:"no",height:"378",width:"620"}})])])]),t._v(" "),null===t.chat||t.fight.invitations[0].team.capt_id!=t.user.id&&t.fight.invitations[1].team.capt_id!=t.user.id&&t.fight.judge_id!=t.user.id&&1!=t.user.role_id?t._e():s("div",{staticClass:"row mt-10 mb-30"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("match-chat",{attrs:{channel:t.chat}})],1)]),t._v(" "),!t.authenticated||2==t.fight.status||3==t.fight.status||t.fight.invitations[0].team.capt_id!=t.user.id&&t.fight.invitations[1].team.capt_id!=t.user.id?t._e():s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("form",{on:{submit:function(i){i.preventDefault(),t.matchExSave(i)},keydown:function(i){t.form.onKeydown(i)}}},[s("alert-success",{attrs:{form:t.form,message:t.$t("info_updated")}}),t._v(" "),s("alert-error",{attrs:{form:t.form}}),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("twitch_link")))]),t._v(" "),s("div",{staticClass:"col-md-7"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.twitch_link,expression:"form.twitch_link"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("twitch_link")},attrs:{placeholder:"https://www.twitch.tv/eulcs",type:"text",name:"twitch_link"},domProps:{value:t.form.twitch_link},on:{input:function(i){i.target.composing||t.$set(t.form,"twitch_link",i.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"twitch_link"}})],1)]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-7 offset-md-3 d-flex"},[s("v-button",{attrs:{loading:t.form.busy}},[t._v("\n                            "+t._s(t.$t("save"))+"\n                        ")])],1)])],1)])]),t._v(" "),!t.authenticated||2==t.fight.status||3==t.fight.status||t.fight.invitations[0].team.capt_id!=t.user.id&&t.fight.invitations[1].team.capt_id!=t.user.id?t._e():s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("form",{on:{submit:function(i){i.preventDefault(),t.saveResult(i)},keydown:function(i){t.formResult.onKeydown(i)}}},[s("alert-success",{attrs:{form:t.formResult,message:t.$t("info_updated")}}),t._v(" "),s("alert-error",{attrs:{form:t.formResult}}),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("match_result")))]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result_1,expression:"result_1"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.result_1},on:{input:function(i){i.target.composing||(t.result_1=i.target.value)}}})]),t._v(" "),s("label",{staticClass:"col-md-1 col-form-label text-center"},[t._v("\n                        :\n                    ")]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result_2,expression:"result_2"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.result_2},on:{input:function(i){i.target.composing||(t.result_2=i.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("winner")))]),t._v(" "),s("div",{staticClass:"col-md-7"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.winner_id,expression:"winner_id"}],staticClass:"form-control",on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.winner_id=i.target.multiple?s:s[0]}}},t._l(t.fight.invitations,function(i){return s("option",{domProps:{value:i.team.id}},[t._v("\n                                "+t._s(i.team.title)+"\n                            ")])}))])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-7 offset-md-3 d-flex"},[s("v-button",{attrs:{loading:t.formResult.busy}},[t._v("\n                            "+t._s(t.$t("save"))+"\n                        ")])],1)])],1)])]),t._v(" "),t.authenticated&&t.fight.judge_id==t.user.id&&3!=t.fight.status?s("div",{staticClass:"row mt-20"},t._l(t.fight.invitations,function(i){return s("div",{staticClass:"col-lg-6 col-md-6 col-sm-6 col-xs-6"},[null!=i.match_result?s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-5 col-form-label text-md-right"},[t._v(t._s(t.$t("match_result"))+":")]),t._v(" "),s("label",{staticClass:"col-md-7 col-form-label"},[t._v("\n                    "+t._s(i.match_result.result_1)+" : "+t._s(i.match_result.result_2)+"\n                ")])]):t._e(),t._v(" "),null!=i.match_result?s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-5 col-form-label text-md-right"},[t._v(t._s(t.$t("winner"))+":")]),t._v(" "),s("label",{staticClass:"col-md-7 col-form-label"},[i.match_result.winner_id==t.fight.invitations[0].team.id?[t._v("\n                        "+t._s(t.fight.invitations[0].team.title)+"\n                    ")]:[t._v("\n                        "+t._s(t.fight.invitations[1].team.title)+"\n                    ")]],2)]):t._e()])})):t._e(),t._v(" "),t.authenticated&&t.fight.judge_id==t.user.id&&3!=t.fight.status?s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[s("form",{on:{submit:function(i){i.preventDefault(),t.saveFight(i)},keydown:function(i){t.formFight.onKeydown(i)}}},[s("alert-success",{attrs:{form:t.formFight,message:t.$t("info_updated")}}),t._v(" "),s("alert-error",{attrs:{form:t.formFight}}),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("match_result")))]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result_1,expression:"result_1"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.result_1},on:{input:function(i){i.target.composing||(t.result_1=i.target.value)}}})]),t._v(" "),s("label",{staticClass:"col-md-1 col-form-label text-center"},[t._v("\n                        :\n                    ")]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result_2,expression:"result_2"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.result_2},on:{input:function(i){i.target.composing||(t.result_2=i.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-md-3 col-form-label text-md-right"},[t._v(t._s(t.$t("winner")))]),t._v(" "),s("div",{staticClass:"col-md-7"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.winner_id,expression:"winner_id"}],staticClass:"form-control",on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.winner_id=i.target.multiple?s:s[0]}}},t._l(t.fight.invitations,function(i){return s("option",{domProps:{value:i.team.id}},[t._v("\n                                "+t._s(i.team.title)+"\n                            ")])}))])]),t._v(" "),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-md-7 offset-md-3 d-flex"},[s("v-button",{attrs:{loading:t.formFight.busy}},[t._v("\n                            "+t._s(t.$t("save"))+"\n                        ")])],1)])],1)])]):t._e(),t._v(" "),s("div",{staticClass:"row mt-20"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},[null!=t.fight.judge?s("div",[s("label",[t._v(t._s(t.$t("judge")))]),t._v(": "+t._s(t.fight.judge.name)),s("br"),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.fight.judge.description)}})]):t._e(),t._v(" "),null!=t.fight.commentator?s("div",{staticClass:"mt-20"},[s("label",[t._v(t._s(t.$t("commentator")))]),t._v(": "+t._s(t.fight.commentator.name)),s("br"),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.fight.commentator.description)}})]):t._e()])])]):t._e()},staticRenderFns:[]};i.a=e}});
//# sourceMappingURL=6.9c773e00567252c022be.js.map