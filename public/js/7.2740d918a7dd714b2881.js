webpackJsonp([7],{QVM2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(a("Xxa5")),s=m(a("exGp")),o=m(a("Dd8w")),n=m(a("yKuP")),i=m(a("mtWM")),l=a("NYxO");function m(e){return e&&e.__esModule?e:{default:e}}t.default={metaInfo:function(){return{title:this.$t("team")}},data:function(){return{form:new n.default({game_id:"",game_roles:"",nickname:""}),games:null,game_roles:null}},computed:(0,o.default)({},(0,l.mapGetters)({user:"auth/user"}),{chars:function(){return this.$t("alphabet").split(",")}}),created:function(){var e=this;this.form.keys().forEach(function(t){e.form[t]=e.user[t]})},mounted:function(){this.getGames(),null!=this.user.game_id&&this.getGameRoles(this.user.game_id)},methods:{getGames:function(){var e=this;return(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.default.get("/api/games").then(function(t){e.$set(e,"games",t.data)});case 2:case"end":return t.stop()}},t,e)}))()},getGameRoles:function(e){var t=this;return(0,s.default)(r.default.mark(function a(){var s;return r.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.ArrayToUrl({game_id:e}),a.next=3,i.default.get("/api/game_roles?"+s).then(function(e){t.$set(t,"game_roles",e.data)});case 3:case"end":return a.stop()}},a,t)}))()},update:function(){var e=this;return(0,s.default)(r.default.mark(function t(){var a,s;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.form.post("/api/users");case 2:a=t.sent,s=a.data,e.$store.dispatch("auth/updateUser",{user:s.data});case 5:case"end":return t.stop()}},t,e)}))()},selectGame:function(){var e=this;return(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGameRoles(e.form.game_id);case 2:case"end":return t.stop()}},t,e)}))()}}}},dqi5:function(e,t,a){var r=a("VU/8")(a("QVM2"),a("ldiL"),!1,null,null,null);e.exports=r.exports},ldiL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("card",{attrs:{title:e.$t("your_info")}},[a("form",{on:{submit:function(t){t.preventDefault(),e.update(t)},keydown:function(t){e.form.onKeydown(t)}}},[a("alert-success",{attrs:{form:e.form,message:e.$t("info_updated")}}),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("game")))]),e._v(" "),a("div",{staticClass:"col-md-7"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.game_id,expression:"form.game_id"}],staticClass:"form-control",attrs:{name:"game_id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"game_id",t.target.multiple?a:a[0])},e.selectGame]}},e._l(e.games,function(t){return a("option",{domProps:{value:t.id}},[e._v("\n                        "+e._s(t.title)+"\n                    ")])})),e._v(" "),a("has-error",{attrs:{form:e.form,field:"game_id"}})],1)]),e._v(" "),null!=e.form.game_id?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("game_roles")))]),e._v(" "),a("div",{staticClass:"col-md-7",staticStyle:{"padding-top":"7px"}},[e._l(e.game_roles,function(t){return null!=e.game_roles&&e.game_roles.length>0?a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.game_roles,expression:"form.game_roles"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.form.game_roles)?e._i(e.form.game_roles,t.id)>-1:e.form.game_roles},on:{change:function(a){var r=e.form.game_roles,s=a.target,o=!!s.checked;if(Array.isArray(r)){var n=t.id,i=e._i(r,n);s.checked?i<0&&(e.form.game_roles=r.concat([n])):i>-1&&(e.form.game_roles=r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.form,"game_roles",o)}}}),e._v(" "),a("label",{staticClass:"form-check-label"},[e._v(e._s(t.title))])]):e._e()}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"game_roles"}})],2)]):e._e(),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label text-md-right"},[e._v(e._s(e.$t("nickname")))]),e._v(" "),a("div",{staticClass:"col-md-7"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nickname,expression:"form.nickname"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("nickname")},attrs:{type:"text",name:"nickname"},domProps:{value:e.form.nickname},on:{input:function(t){t.target.composing||e.$set(e.form,"nickname",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"nickname"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-md-9 ml-md-auto"},[a("v-button",{attrs:{loading:e.form.busy,type:"success"}},[e._v(e._s(e.$t("update")))])],1)])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=7.2740d918a7dd714b2881.js.map