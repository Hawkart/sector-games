{"version":3,"file":"js/3.409192e2a029227c7f76.js","sources":["webpack:///js/3.409192e2a029227c7f76.js"],"sourcesContent":["webpackJsonp([3],{\"04F5\":function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={props:[\"participants\"]}},\"8Vpf\":function(t,e,a){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ul\",{ref:\"message-window\",staticClass:\"chatapp-chat-nicescroll-bar pt-10\"},[t._l(t.messages,function(e){return a(\"li\",{key:e.id,class:e.user.id==t.user.id?\"self\":\"friend\"},[e.user.id==t.user.id?a(\"div\",{staticClass:\"self-msg-wrap\"},[a(\"div\",{staticClass:\"msg block pull-right\"},[t._v(\" \"+t._s(e.body)+\"\\n                \"),a(\"div\",{staticClass:\"msg-per-detail text-right\"},[a(\"span\",{staticClass:\"msg-time txt-grey\"},[t._v(t._s(e.created_at))])])]),t._v(\" \"),a(\"div\",{staticClass:\"clearfix\"})]):a(\"div\",{staticClass:\"friend-msg-wrap\"},[a(\"img\",{staticClass:\"rounded-circle profile-photo w-20 block pull-left\",attrs:{src:t.getImageLink(e.user.avatar),title:e.user.nickname,alt:e.user.nickname}}),t._v(\" \"),a(\"div\",{staticClass:\"msg pull-left\"},[t._v(\"\\n                \"+t._s(e.body)+\"\\n                \"),a(\"div\",{staticClass:\"msg-per-detail  text-right\"},[a(\"span\",{staticClass:\"msg-time txt-grey\"},[t._v(t._s(e.created_at))])])]),t._v(\" \"),a(\"div\",{staticClass:\"clearfix\"})])])}),t._v(\" \"),t.isTyping&&t.isTyping.user.id!=t.user.id?a(\"li\",{staticClass:\"friend\"}):t._e()],2)},staticRenderFns:[]};e.a=s},AQiR:function(t,e,a){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"chat-button-cont\",class:{\"d-none\":t.showChats}},[a(\"div\",{staticClass:\"chat-button-tooltip\"},[t._v(\"Чаты...\")]),t._v(\" \"),a(\"div\",{staticClass:\"chat-button nk-btn-color-main-1\",on:{click:function(e){e.preventDefault(),t.showChats=!t.showChats}}},[a(\"i\",{staticClass:\"fa fa-comments-o\",attrs:{\"aria-hidden\":\"true\"}})])]),t._v(\" \"),a(\"div\",{staticClass:\"row mt-20 chat-window\",class:{\"d-none\":!t.showChats}},[a(\"div\",{staticClass:\"col-md-12\"},[a(\"div\",{staticClass:\"chat-cmplt-wrap chat-for-widgets-1\"},[a(\"div\",{staticClass:\"recent-chat-box-wrap\"},[a(\"div\",{staticClass:\"recent-chat-wrap\"},[a(\"div\",{staticClass:\"panel-heading ma-0 pt-5\"},[a(\"div\",{staticClass:\"goto-back\"},[null!=t.activeChannel?[a(\"a\",{staticClass:\"inline-block txt-grey\",attrs:{href:\"javascript:void(0)\",title:\"Chats\"},on:{click:function(e){e.preventDefault(),t.onChannelChanged(null)}}},[null!=t.activeChannel?a(\"i\",{staticClass:\"fa fa-weixin\",attrs:{\"aria-hidden\":\"true\"}}):t._e()]),t._v(\" \"),a(\"span\",{staticClass:\"inline-block txt-dark truncate\"},[t._v(\"\\n                                        \"+t._s(t.activeChannel.subject)+\"\\n                                    \")])]:[a(\"span\",{staticClass:\"inline-block txt-dark truncate\",staticStyle:{width:\"66%\"}},[t._v(\"\\n                                        Список чатов\\n                                    \")])],t._v(\" \"),a(\"div\",{staticClass:\"inline-block text-right txt-grey\"},[a(\"span\",{staticClass:\"fa fa-window-maximize chat-window-top-buttons\",attrs:{\"aria-hidden\":\"true\"}}),t._v(\" \"),a(\"span\",{staticClass:\"fa fa-times chat-window-top-buttons\",attrs:{\"aria-hidden\":\"true\"},on:{click:function(e){e.preventDefault(),t.showChats=!t.showChats}}})]),t._v(\" \"),a(\"div\",{staticClass:\"clearfix\"})],2)]),t._v(\" \"),null!=t.activeChannel?a(\"div\",[a(\"div\",{staticClass:\"chat-content\"},[a(\"chat-messages\",{attrs:{messages:t.messages,isTyping:t.isTyping}})],1),t._v(\" \"),a(\"chat-new-message\",{attrs:{\"active-channel\":t.activeChannel},on:{messageAdded:t.onMessageAdded}})],1):a(\"div\",[a(\"chat-channels\",{attrs:{channels:t.channels,\"active-channel\":t.activeChannel},on:{channelChanged:t.onChannelChanged}})],1)])])])])])])},staticRenderFns:[]};e.a=s},Drxo:function(t,e,a){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"column is-2\"},t._l(t.participants,function(e,s){return a(\"p\",{key:s,domProps:{textContent:t._s(e)}})}))},staticRenderFns:[]};e.a=s},HPyy:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=d(a(\"BO1k\")),n=d(a(\"Dd8w\")),i=a(\"NYxO\"),r=d(a(\"mtWM\")),c=d(a(\"T3t9\")),l=d(a(\"xOid\")),u=d(a(\"gMd1\")),o=d(a(\"xOfH\"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{ChatParticipants:o.default,ChatChannels:u.default,ChatMessages:c.default,ChatNewMessage:l.default},computed:(0,n.default)({},(0,i.mapGetters)({user:\"auth/user\",authenticated:\"auth/check\"})),props:[\"channels\"],data:function(){return{participants:[],socket:null,messages:null,activeChannel:null,isTyping:!1,typingTimer:!1,showChats:!1}},created:function(){var t=this;this.fetchMessages(),this.fetchParticipants();var e=!0,a=!1,n=void 0;try{for(var i,r=(0,s.default)(this.channels);!(e=(i=r.next()).done);e=!0){var c=i.value;window.Echo.private(\"channel_\"+c.id.toString()).listen(\"MessageSent\",function(e){t.messages.push(e.data),t.isTyping=!1}).listenForWhisper(\"typing\",function(e){t.isTyping=e,t.typingTimer&&clearTimeout(t.typingTimer),t.typingTimer=setTimeout(function(){t.isTyping=!1},2e3)})}}catch(t){a=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw n}}},methods:{fetchMessages:function(){var t=this;null!==this.activeChannel&&r.default.get(\"/api/channels/\"+this.activeChannel.id+\"/messages\").then(function(e){var a=e.data;t.messages=a})},fetchParticipants:function(){var t=this;null!==this.activeChannel&&r.default.get(\"/api/channels/\"+this.activeChannel.id+\"/participants\").then(function(e){var a=e.data;t.participants=a})},onChannelChanged:function(t){this.activeChannel=t,this.fetchMessages(),this.fetchParticipants()},onMessageAdded:function(t){}}}},K8c1:function(t,e,a){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ul\",{staticClass:\"chat-list-wrap\"},[a(\"li\",{staticClass:\"chat-list\"},[a(\"div\",{staticClass:\"chat-body\"},t._l(t.channels,function(e){return null!=t.channels?a(\"a\",{key:e.id,staticClass:\"channel\",class:{active:null!==t.activeChannel&&e.id==t.activeChannel.id},attrs:{href:\"javascript:void(0)\"},on:{click:function(a){t.setChannel(e)}}},[a(\"div\",{staticClass:\"chat-data\"},[a(\"i\",{staticClass:\"fa fa-weixin user-img img-circle\",attrs:{\"aria-hidden\":\"true\"}}),t._v(\" \"),a(\"div\",{staticClass:\"user-data\"},[a(\"span\",{staticClass:\"name block capitalize-font\"},[t._v(t._s(e.subject))]),t._v(\" \"),a(\"span\",{staticClass:\"time block truncate text-white\",attrs:{title:e.participantsString}},[t._v(t._s(e.participantsString))])]),t._v(\" \"),e.userUnreadMessagesCount>0?a(\"div\",{staticClass:\"pull-right pa-t-13\"},[a(\"span\",{staticClass:\"label label-warning ml-10\"},[t._v(t._s(e.userUnreadMessagesCount))])]):t._e(),t._v(\" \"),a(\"div\",{staticClass:\"clearfix\"})])]):a(\"div\",[t._v(\"\\n                У вас нет активных чатов.\\n            \")])}))])])},staticRenderFns:[]};e.a=s},OruT:function(t,e,a){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"input-group\"},[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.message,expression:\"message\"}],staticClass:\"input-msg-send form-control\",attrs:{type:\"text\",id:\"input_msg_send_chatapp\",placeholder:\"Напечатайте что-нибудь...\"},domProps:{value:t.message},on:{keyup:function(e){if(!(\"button\"in e)&&t._k(e.keyCode,\"enter\",13,e.key))return null;e.preventDefault(),t.sendMessage(e)},keydown:t.actionUser,input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(\" \"),a(\"span\",{staticClass:\"input-group-btn\"},[a(\"button\",{staticClass:\"btn btn-default\",attrs:{type:\"button\"},on:{click:function(e){e.preventDefault(),t.sendMessage(e)}}},[a(\"i\",{staticClass:\"fa fa-paper-plane\",attrs:{\"aria-hidden\":\"true\"}})])])])},staticRenderFns:[]};e.a=s},T3t9:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"nngi\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"8Vpf\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},biJn:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=r(a(\"Dd8w\")),n=a(\"NYxO\"),i=r(a(\"mtWM\"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={props:[\"activeChannel\"],computed:(0,s.default)({},(0,n.mapGetters)({user:\"auth/user\",authenticated:\"auth/check\"})),data:function(){return{message:\"\"}},methods:{sendMessage:function(){var t=this;i.default.post(\"/api/channels/\"+this.activeChannel.id+\"/messages\",{message:this.message}).then(function(e){t.message=\"\",t.$emit(\"messageAdded\",e.data)})},actionUser:function(){window.Echo.private(\"channel_\"+this.activeChannel.id.toString()).whisper(\"typing\",{user:this.user})}}}},gMd1:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"r4A1\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"K8c1\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},hTNP:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"HPyy\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"AQiR\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},nngi:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s,n=a(\"Dd8w\"),i=(s=n)&&s.__esModule?s:{default:s},r=a(\"NYxO\");e.default={props:[\"messages\",\"isTyping\"],mounted:function(){this.scrollToBottom()},computed:(0,i.default)({},(0,r.mapGetters)({user:\"auth/user\",authenticated:\"auth/check\"})),watch:{messages:function(){this.scrollToBottom()}},methods:{scrollToBottom:function(){var t=this;this.$nextTick(function(){t.$refs[\"message-window\"].scrollTop=t.$refs[\"message-window\"].scrollHeight})}}}},qHDn:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"zku0\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"vlrn\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},r4A1:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={props:[\"channels\",\"activeChannel\"],methods:{setChannel:function(t){this.$emit(\"channelChanged\",t)}}}},vlrn:function(t,e,a){\"use strict\";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return null!==this.channels?e(\"chat\",{attrs:{channels:this.channels}}):this._e()},staticRenderFns:[]};e.a=s},xOfH:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"04F5\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"Drxo\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},xOid:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"biJn\"),n=a.n(s);for(var i in s)\"default\"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var r=a(\"OruT\"),c=a(\"VU/8\")(n.a,r.a,!1,null,null,null);e.default=c.exports},zku0:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=c(a(\"Dd8w\")),n=a(\"NYxO\"),i=c(a(\"hTNP\")),r=c(a(\"mtWM\"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Chat:i.default},metaInfo:{titleTemplate:\"Chat | %s\"},computed:(0,s.default)({},(0,n.mapGetters)({user:\"auth/user\",authenticated:\"auth/check\"})),data:function(){return{channels:null}},created:function(){this.getThreads()},methods:{getThreads:function(){var t=this;r.default.get(\"/api/users/\"+this.user.id+\"/threads\").then(function(e){t.$set(t,\"channels\",e.data)})}}}}});\n\n\n// WEBPACK FOOTER //\n// js/3.409192e2a029227c7f76.js"],"mappings":"AAAA","sourceRoot":""}